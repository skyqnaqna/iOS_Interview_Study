## 1. 답변

> '프로세스'는 컴퓨터에서 실행되고 있는 프로그램을 의미하며, 메모리에 올라와 실행되고 있는 프로그램의 인스턴스입니다.  <br>
운영체제로 부터 자원을 할당받은 작업의 단위 (Task)
> 

> '쓰레드'는 프로세스의 실행 가능한 가장 작은 흐름의 단위이며, 프로세스 내에서 실행되는 여러 스레드를 가질 수 있다.
> 
| 프로세스 | 쓰레드 |
| ------- | ------ |
| ![Untitled](https://user-images.githubusercontent.com/37897873/199662520-c1199e01-a631-48d3-91f3-351d17a6e8ff.png) | ![22](https://user-images.githubusercontent.com/37897873/199662555-1262938b-af71-4393-b8dd-493128cafe4f.png) |

| | 프로세스 | 쓰레드 |
| ------- | ------ | ------- |
| 영역 | 각각 독립된 메모리 영역을 할당 | Stack만 따로 받고, Code, Data, Heap 영역은 공유 |
| 공유 | 다른 프로세스의 메모리에 변수나 자료구조에 직접 접근 불가<br>IPC 방법 등을 사용해야 한다. | 같은 프로세스의 여러 스레드는 같은 힙 공간을 공유 <br>→ 메모리를 공유하기에 정보 공유가 쉽다. |
| 강제종료 | 다른 프로세스에 아무런 영향을 주지 않는다. | 내용을 공유하기 때문에, 하나의 스레드에서 오류나면 다른 프로세스 모두 강제종료됨 |
| 비유 | 코드 | 함수 |
| 비유 설명 | A 프로젝트의 코드가 바뀌어도 B 프로젝트 코드에 영향 없음 | 코드 내 함수 하나가 오류나면, 어떤 함수에서 오류가 발생되든 다른 모든 함수에 대한 작업 중단하고 프로세스 실행을 중단시킴 |
| 정리 | 운영체제로 부터 시스템 자원을 할당 | CPU 입장에서 최소 작업 단위 |
| 멀티 | <b>멀티태스킹</b> <br> 여러 프로세스가 실행되어 동시에 실행되는 것처럼 보이지만, (싱글코어기준) 하나의 프로세스가 엄청 빠르게 일을 하는 거임 (Context Switching) |<b>멀티 스레딩</b> <br> 하나의 프로세스가 여러 작업을 여러 스레드를 사용해 동시에 처리한다. <br>- 장점 : 메모리 절약 <br>- 단점 : 자원을 공유하기에 동기화 문제 발생  <br> * 동기화 문제 : 여러 스레드가 함께 전역변수를 사용할 때 발생할 수 있는 충돌 |
<img width="734" alt="2233" src="https://user-images.githubusercontent.com/37897873/199663610-3efca995-6132-49af-ba36-1b1f449c48db.png">

## 2. 내용

### 컴파일과정

프로그램은 컴파일러가 컴파일 과정을 거쳐 기계어로 번역되어 실행할 수 있는 파일이 되는 것 

1. 전처리 : 주석을 제거, `#include` 등 헤더 파일을 병합하여 매크로로 치환한다.
2. 컴파일러 : 오류처리, 코드 최적화 작업을 해 어셈블리어로 변경한다.
3. 어셈블러 : 어셈블리어는 목적 코드로 변환. 확장자는 리눅스의 경우 `.o` 이다.  
    1. 예를 들어, test.c라는 파일을 만들 떄 test.o 라는 파일이 만들어진다.
4. 링커 : 프로그램 내에 라이브러리 함수 or 다른 파일과 목적코드를 결합하여 실행파일 만든다. 확장자는 `.exe` `.out`

### 프로세스의 상태

- 생성(create) : 프로세스가 생성된 상태 fork() , exec() 함수를 통해 생성한다. 이 때 PCB가 할당된다.
    - `fork()` : 부모 프로세스의 주소 공간을 그대로 복사하며 새로운 자식 프로세스를 생성하는 함수이다. (주소 공간만 복사할뿐 부모 프로세스의 작업은 상속하지 않는다.)
    - `exec()` : 새롭게 프로세스를 생성하는 함수
- 대기(ready) : 메모리 공간이 충분하면 메모리를 할당받고, 아니면 대기하고 있는다. CPU 스케줄러로 부터 CPU 소유권이 넘어오기를 기다리는 상태
    - 대기중단(ready suspended) : 메모리 부족으로 일시 중단 된 상태
- 실행상태 (runnning) : CPU 소유권과 메모리를 할당 받고, 인스트럭션을 수행중인 상태이다. 이를 CPU burst가 일어났다고도 표현합니다.
- 중단 (blocked) : 어떤 이벤트 발생 후 기다리면서 프로세스가 차단된 상태,
- 종료 (Terminated) : 프로세스가 종료되어 메모리와 CPU 소유권을 모두 놓고 제거됨.

### 프로세스의 메모리 구조

- 스택, 힙, 데이터(BSS, Data), 코드 영역
- 스택은 위 주소부터 할당, 힙은 아래 주소부터 할당
<img width="504" alt="2233" src="https://user-images.githubusercontent.com/37897873/199663554-b1920e73-d953-4f3d-94be-d4502bc5e381.png">


- `Stack` : 지역변수, 매개변수, 함수가 저장, 고정된 크기의 공간
    - 컴파일 시에 크기가 결정
    - 동적인 특징
    - 주로 함수가 불렸을 때 데이터를 저장했다가 함수가 종료될 때 데이터를 반환
    - unused memory 있는 이유? 힙과 스택의 메모리 영역이 겹치면 안되므로 비워둔다.
- `Heap` : 프로세스 동작 중 동적으로 데이터 할당
    - 런타임시 크기 결정
- `데이터` : 전역변수, 정적 변수 저장
    - 정적인 특징 : 프로그램이 종료되면 사라지는 변수가 들어있는 영역
    - BSS 영역 : 초기화 되지 않은 변수가 있으면 0으로 초기화되어 저장
    - Data 영역 : 0이 아닌 다른 값으로 할당된 변수들이 저장됨
- `코드` : 프로그램에 내장된 소스코드가 있는 영역
    - 정적인 특징 : 수정불가

## 3. 추가 질문

### 프로세스와 프로그램의 차이는?

- 프로그램 : 컴파일러가 컴파일 과정을 거쳐 컴퓨터가 이해할 수 있는 기계어로 번역되어 실행 파일이 그 자체 (=코드 덩어리)
    - 메모리에는 올라가 있지 않은 정적인 상태
    - ex) Xcode 프로그램(Xcode.exe)
- 프로세스 : 프로그램을 더블 클릭하면 프로세스가 실행 즉, 실행 상태
    - 실행된 동적인 상태

⭐️ 프로그램 → 프로세스 → 스레드

### PCB는 무엇인가요?

Process Control Block(프로세스 제어 블록) : 프로세스의 정보를 포함하는 운영 체제 커널의 자료구조

- 프로세스가 생성되면 운영체제는 해당 PCB를 생성한다. (운영체제가 프로세스를 표현한 것!)
- 프로그램이 실행되면 프로세스가 생성되고, 메타데이터들이 PCB에 저장되어 관리된다.
    *메타 데이터 : 데이터에 관한 구조화 된 데이터, 대량 정보 중 효율적으로 찾기 위해 일정한 규칙에 따라 콘텐츠에 부여되는 데이터 
- PCB는 프로세스의 중요한 정보를 담기 때문에, 일반 사용자가 접근 못하도록 커널 스택 가장 앞부분에서 관리
### PCB의 구조는?
1. 프로세스 ID
2. 프로세스 상태
3. 프로그램 카운터
4. 계정정보
5. 스케줄링 정보
6. 부모 프로세스와 자녀 프로세스에 대한 포인터
7. 레지스터 정보
8. 입출력 상태

### 컨텍스트 스위칭은 무엇인가요?

<b>: PCB를 교환하는 과정</b> <br>
컴퓨터는 많은 프로그램을 동시에 실행하는 것 처럼 보이지만, 다른 프로세스들과 컨텍스트 스위칭이 아주 빠른 속도로 실행되고 있어 동시에 실행이 되는 것 처럼 보인다 (싱글 코어 기준)


## 4. 참고 자료

- PCB : [https://ko.wikipedia.org/wiki/프로세스_제어_블록](https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4_%EC%A0%9C%EC%96%B4_%EB%B8%94%EB%A1%9D)
- [https://github.com/jeonyeohun/Getting-Ready-For-Interview/blob/main/OperatingSystem/01_Process.md](https://github.com/jeonyeohun/Getting-Ready-For-Interview/blob/main/OperatingSystem/01_Process.md)
- 프로세스와 쓰레드 차이
    - [https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html](https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html)
    - ⭐️ 좋은자료 [https://velog.io/@raejoonee/프로세스와-스레드의-차이](https://velog.io/@raejoonee/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EC%8A%A4%EB%A0%88%EB%93%9C%EC%9D%98-%EC%B0%A8%EC%9D%B4)